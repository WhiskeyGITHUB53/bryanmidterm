{"version":3,"file":"vue-i18n.mjs","names":["watch","useProxiedModel","useProvided","props","prop","provided","internal","value","v","createProvideFunction","data","current","fallback","messages","i18n","useI18n","locale","fallbackLocale","useScope","legacy","inheritLocale","name","t","n","provide","createVueI18nAdapter","global"],"sources":["../../../src/locale/adapters/vue-i18n.ts"],"sourcesContent":["import { watch } from 'vue'\nimport { useProxiedModel } from '@/composables/proxiedModel'\n\nimport type { Ref } from 'vue'\nimport type { LocaleInstance, LocaleMessages, LocaleOptions } from '@/composables/locale'\nimport type { I18n, useI18n } from 'vue-i18n'\n\ntype VueI18nAdapterParams = {\n  i18n: I18n<{}, {}, {}, string, false>\n  useI18n: typeof useI18n\n}\n\nfunction useProvided <T> (props: any, prop: string, provided: Ref<T>) {\n  const internal = useProxiedModel(props, prop)\n\n  internal.value = props[prop] ?? provided.value\n\n  watch(provided, v => {\n    if (props[prop] == null) {\n      internal.value = v\n    }\n  })\n\n  return internal as Ref<T>\n}\n\nfunction createProvideFunction (data: {\n  current: Ref<string>\n  fallback: Ref<string>\n  messages: Ref<LocaleMessages>\n  useI18n: typeof useI18n\n}) {\n  return (props: LocaleOptions): LocaleInstance => {\n    const current = useProvided(props, 'locale', data.current)\n    const fallback = useProvided(props, 'fallback', data.fallback)\n    const messages = useProvided(props, 'messages', data.messages)\n\n    const i18n = data.useI18n({\n      locale: current.value,\n      fallbackLocale: fallback.value,\n      messages: messages.value as any,\n      useScope: 'local',\n      legacy: false,\n      inheritLocale: false,\n    })\n\n    watch(current, v => {\n      i18n.locale.value = v\n    })\n\n    return {\n      name: 'vue-i18n',\n      current,\n      fallback,\n      messages,\n      // @ts-expect-error Type instantiation is excessively deep and possibly infinite\n      t: i18n.t,\n      n: i18n.n,\n      provide: createProvideFunction({ current, fallback, messages, useI18n: data.useI18n }),\n    }\n  }\n}\n\nexport function createVueI18nAdapter ({ i18n, useI18n }: VueI18nAdapterParams): LocaleInstance {\n  const current = i18n.global.locale\n  const fallback = i18n.global.fallbackLocale as Ref<any>\n  const messages = i18n.global.messages\n\n  return {\n    name: 'vue-i18n',\n    current,\n    fallback,\n    messages,\n    t: i18n.global.t,\n    n: i18n.global.n,\n    provide: createProvideFunction({ current, fallback, messages, useI18n }),\n  }\n}\n"],"mappings":"AAAA,SAASA,KAAT,QAAsB,KAAtB;SACSC,e;;AAWT,SAASC,WAAT,CAA0BC,KAA1B,EAAsCC,IAAtC,EAAoDC,QAApD,EAAsE;EACpE,MAAMC,QAAQ,GAAGL,eAAe,CAACE,KAAD,EAAQC,IAAR,CAAhC;EAEAE,QAAQ,CAACC,KAAT,GAAiBJ,KAAK,CAACC,IAAD,CAAL,IAAeC,QAAQ,CAACE,KAAzC;EAEAP,KAAK,CAACK,QAAD,EAAWG,CAAC,IAAI;IACnB,IAAIL,KAAK,CAACC,IAAD,CAAL,IAAe,IAAnB,EAAyB;MACvBE,QAAQ,CAACC,KAAT,GAAiBC,CAAjB;IACD;EACF,CAJI,CAAL;EAMA,OAAOF,QAAP;AACD;;AAED,SAASG,qBAAT,CAAgCC,IAAhC,EAKG;EACD,OAAQP,KAAD,IAA0C;IAC/C,MAAMQ,OAAO,GAAGT,WAAW,CAACC,KAAD,EAAQ,QAAR,EAAkBO,IAAI,CAACC,OAAvB,CAA3B;IACA,MAAMC,QAAQ,GAAGV,WAAW,CAACC,KAAD,EAAQ,UAAR,EAAoBO,IAAI,CAACE,QAAzB,CAA5B;IACA,MAAMC,QAAQ,GAAGX,WAAW,CAACC,KAAD,EAAQ,UAAR,EAAoBO,IAAI,CAACG,QAAzB,CAA5B;IAEA,MAAMC,IAAI,GAAGJ,IAAI,CAACK,OAAL,CAAa;MACxBC,MAAM,EAAEL,OAAO,CAACJ,KADQ;MAExBU,cAAc,EAAEL,QAAQ,CAACL,KAFD;MAGxBM,QAAQ,EAAEA,QAAQ,CAACN,KAHK;MAIxBW,QAAQ,EAAE,OAJc;MAKxBC,MAAM,EAAE,KALgB;MAMxBC,aAAa,EAAE;IANS,CAAb,CAAb;IASApB,KAAK,CAACW,OAAD,EAAUH,CAAC,IAAI;MAClBM,IAAI,CAACE,MAAL,CAAYT,KAAZ,GAAoBC,CAApB;IACD,CAFI,CAAL;IAIA,OAAO;MACLa,IAAI,EAAE,UADD;MAELV,OAFK;MAGLC,QAHK;MAILC,QAJK;MAKL;MACAS,CAAC,EAAER,IAAI,CAACQ,CANH;MAOLC,CAAC,EAAET,IAAI,CAACS,CAPH;MAQLC,OAAO,EAAEf,qBAAqB,CAAC;QAAEE,OAAF;QAAWC,QAAX;QAAqBC,QAArB;QAA+BE,OAAO,EAAEL,IAAI,CAACK;MAA7C,CAAD;IARzB,CAAP;EAUD,CA5BD;AA6BD;;AAED,OAAO,SAASU,oBAAT,OAAwF;EAAA,IAAzD;IAAEX,IAAF;IAAQC;EAAR,CAAyD;EAC7F,MAAMJ,OAAO,GAAGG,IAAI,CAACY,MAAL,CAAYV,MAA5B;EACA,MAAMJ,QAAQ,GAAGE,IAAI,CAACY,MAAL,CAAYT,cAA7B;EACA,MAAMJ,QAAQ,GAAGC,IAAI,CAACY,MAAL,CAAYb,QAA7B;EAEA,OAAO;IACLQ,IAAI,EAAE,UADD;IAELV,OAFK;IAGLC,QAHK;IAILC,QAJK;IAKLS,CAAC,EAAER,IAAI,CAACY,MAAL,CAAYJ,CALV;IAMLC,CAAC,EAAET,IAAI,CAACY,MAAL,CAAYH,CANV;IAOLC,OAAO,EAAEf,qBAAqB,CAAC;MAAEE,OAAF;MAAWC,QAAX;MAAqBC,QAArB;MAA+BE;IAA/B,CAAD;EAPzB,CAAP;AASD"}